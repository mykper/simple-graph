(this["webpackJsonpsimple-graph"]=this["webpackJsonpsimple-graph"]||[]).push([[0],{41:function(e,t,a){e.exports=a(52)},46:function(e,t,a){},47:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(14),o=a.n(i),c=(a(46),a(6)),s=a(21),u=a(11),l=(a(47),a(38)),h=a(69),d=a(67),m=a(29),f=a(30),v=function(){function e(t){var a=this;Object(m.a)(this,e),this.set=new Set,Object(u.a)(Array(t).keys()).forEach((function(e){return Object(u.a)(Array(t).keys()).forEach((function(t){a.set.add(a.hash([e,t]))}))})),this.maxValue=t,this.maxSquared=Math.pow(t,2)}return Object(f.a)(e,[{key:"hash",value:function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return a<0||n<0||a>this.maxValue-1||n>this.maxValue-1?-1:10*a+n|0}},{key:"revHash",value:function(e){return[e/this.maxValue|0,e%this.maxValue]}},{key:"edgeHash",value:function(e,t){return 0|Math.min(t*this.maxSquared+e,e*this.maxSquared+t)}},{key:"revEdgeHash",value:function(e){return[e/this.maxSquared|0,e%this.maxSquared]}}]),e}(),p=function(){function e(t,a){Object(m.a)(this,e),this.vertices=new Map,this.edges=new Set,this.adjList=new Map,this.domain=t,this.pattern=a}return Object(f.a)(e,[{key:"addVertex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.vertices.has(e)||(this.vertices.set(e,t),this.addToAdj(e))}},{key:"addToAdj",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=[];this.adjList.has(e)&&(a=this.adjList.get(e)),null!==t&&a.push(t),this.adjList.set(e,a)}},{key:"addEdge",value:function(e,t){var a=this.domain.edgeHash(e,t);this.edges.has(a)||(this.edges.add(a,!0),this.addToAdj(e,t),this.addToAdj(t,e))}},{key:"getNeighborList",value:function(e){var t=this,a=[];return this.pattern.forEach((function(n){var r=Object(c.a)(n,2),i=r[0],o=r[1],s=t.domain.revHash(e),u=Object(c.a)(s,2),l=u[0],h=u[1];l+=i,h+=o;var d=t.domain.hash([l,h]);t.domain.set.has(d)&&t.vertices.has(d)&&a.push(d)})),a}},{key:"getDomainList",value:function(){var e=[];return this.domain.set.forEach((function(t){e.push(t)})),e}},{key:"getVertexList",value:function(){var e=[];return this.vertices.forEach((function(t,a){e.push(a)})),e}},{key:"getEdgeList",value:function(){var e=this,t=[];return this.edges.forEach((function(a){var n=e.domain.revEdgeHash(a),r=Object(c.a)(n,2),i=r[0],o=r[1];t.push([e.domain.revHash(i),e.domain.revHash(o)])})),t}},{key:"getComponents",value:function(){var e=this,t=[],a=new Set;return this.adjList.forEach((function(n,r){if(!a.has(r))if(0===n.length)a.add(r),t.push([r]);else{var i=[r];t.push(i),a.add(r),function t(n,r){n.forEach((function(n){a.has(n)||(a.add(n),r.push(n),t(e.adjList.get(n),r))}))}(n,i)}})),t}},{key:"construct",value:function(e){var t=this;var a=function(e){var t=e.reduce((function(e,t){return e+t}),0);if(Math.abs(1-t)>.001)throw console.debug(t),new Error("Probability mass function doesn't sum to one.");var a=e.map((function(e,t){return e>0?t:-1})).filter((function(e){return e>-1})),n=a.map((function(t){return e[t]})),r=new Array(n.length).fill(0),i=0;return n.forEach((function(e,t){i+=e,r[t]=i})),function(){var e=Math.random(),t=r.findIndex((function(t){return e-t<=0}));return-1===t?a.slice(-1):a[t]}}(e);this.domain.set.forEach((function(e){var n=a();t.addVertex(e,n)}));var n=new Set;this.vertices.forEach((function(e,a){t.getNeighborList(a).forEach((function(e){return n.add(t.domain.edgeHash(a,e))}))}));var r=Object(u.a)(n.keys());!function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}}(r);var i=function(e){return t.adjList.get(e).length<t.vertices.get(e)};r.forEach((function(e){var a=t.domain.revEdgeHash(e),n=Object(c.a)(a,2),r=n[0],o=n[1];i(r)&&i(o)&&t.addEdge(r,o)}))}}]),e}(),g=r.a.createContext(null),E={UPDATE_DIST:0,CREATE_GRAPH:1},y=a(9),b=a(70),j=a(71),k=function(){var e=Object(n.useContext)(g),t=e.state,a=e.dispatch;return r.a.createElement("div",{className:"vertical-control-group"},Object(u.a)(Array(5).keys()).map((function(e){return r.a.createElement(j.a,{max:1,step:.001,key:e,style:{gridColumn:e+2,gridRow:1,margin:"auto"},orientation:"vertical",value:t.control[e],onChange:function(t,n){a({type:E.UPDATE_DIST,payload:{index:e,value:n}})}})})))},x=Object(y.a)({root:{borderRadius:3,border:0,height:"2rem",padding:"0 32px",fontSize:"1.5rem"},label:{textTransform:"capitalize"}})(b.a);var O=function(){var e=Object(n.useContext)(g).dispatch;return r.a.createElement("div",{className:"control-group"},r.a.createElement(d.a,{className:"control-title",variant:"h3"},"simple-graph"),r.a.createElement(k,null),r.a.createElement("div",null,r.a.createElement(x,{variant:"contained",onClick:function(){return e({type:E.CREATE_GRAPH,payload:null})}},"Create")))},w=function(e){var t=e.y,a=e.x,n=90*Math.random()|0;return r.a.createElement(r.a.Fragment,null,r.a.createElement("line",{className:"marker-line",x1:a+.005,x2:a-.005,y1:t+.005,y2:t-.005,strokeWidth:.0025,transform:"rotate(".concat(n," ").concat(a," ").concat(t,")")}),r.a.createElement("line",{className:"marker-line",x1:a+.005,x2:a-.005,y1:t-.005,y2:t+.005,strokeWidth:.0025,transform:"rotate(".concat(n," ").concat(a," ").concat(t,")")}))},A=.1,H=.1,L=.1,N=.1,S=r.a.memo((function(e){var t=e.graph,a=function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return[H+a*N,A+n*L]},n=t.getDomainList().map((function(e){return a(t.domain.revHash(e))})),i=t.getEdgeList().map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return[a(n),a(r)]})),o=t.getComponents().sort((function(e,t){return e.length<t.length})).filter((function(e){return e.length>4})).slice(0,5),s=new Map(o.map((function(e,t){return e.map((function(e){return[e,t]}))})).flat()),u=t.getVertexList().map((function(e){var n;return{pos:a(t.domain.revHash(e)),label:null!==(n=s.get(e))&&void 0!==n?n:-1}}));return r.a.createElement("div",{className:"svg-grid"},r.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 1.1 1.1"},0===u.length&&n.map((function(e,t){var a=Object(c.a)(e,2),n=a[0],i=a[1];return r.a.createElement(w,{key:t,y:n,x:i})})),i.map((function(e,t){var a=Object(c.a)(e,2),n=a[0],i=a[1];return r.a.createElement("line",{className:"edge-line",key:t,x1:n[1],x2:i[1],y1:n[0],y2:i[0],strokeWidth:.025})})),u.map((function(e,t){var a=Object(c.a)(e.pos,2),n=a[0],i=a[1],o=e.label;return r.a.createElement("circle",{className:"graph-node label-".concat(o+1),key:t,cx:i,cy:n,r:.03})}))))})),T=function(){var e=Object(n.useContext)(g).state;return r.a.createElement(S,{graph:e.graph})},C=a(68),M=Object(l.a)({palette:{primary:{main:C.a[100]}},typography:{fontFamily:["Teko","sans-serif"]}});function R(e,t){switch(t.type){case E.UPDATE_DIST:var a=t.payload,n=a.index,r=a.value,i=r-e.control[n],o=Object(u.a)(e.control);o[n]=0;var c=o.reduce((function(e,t){return e+t}),0);return 0!==c?(o=o.map((function(e){return e*(1-i/c)})))[n]=r:(o=o.map((function(e){return-i/4})))[n]=r,Object(s.a)(Object(s.a)({},e),{},{control:o});case E.CREATE_GRAPH:var l=new p(e.graph.domain,e.graph.pattern);return l.construct(e.control),Object(s.a)(Object(s.a)({},e),{},{graph:l});default:return e}}var V=function(){var e=Object(n.useReducer)(R,void 0,(function(){var e=new v(10);return Object(u.a)(Array(4).keys()).forEach((function(t){Object(u.a)(Array(4).keys()).forEach((function(a){var n=e.hash([t+3,a+3]);e.set.has(n)&&e.set.delete(n)}))})),{graph:new p(e,[[0,-1],[-1,0],[0,1],[1,0]]),control:[0,.2,.5,.25,.05]}})),t=Object(c.a)(e,2),a=t[0],i=t[1];return r.a.createElement("div",{className:"app"},r.a.createElement(h.a,{theme:M},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"container"},r.a.createElement(g.Provider,{value:{state:a,dispatch:i}},r.a.createElement(T,null),r.a.createElement("div",{className:"logo"},r.a.createElement(d.a,{variant:"h1"},"SG")),r.a.createElement(O,null))),r.a.createElement("footer",null,r.a.createElement(d.a,{className:"copy",variant:"body1"},"\xa9 2020 mykper")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.06882315.chunk.js.map